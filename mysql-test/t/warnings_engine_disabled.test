# The include statement below is a temp one for tests that are yet to
#be ported to run with InnoDB,
#but needs to be kept for tests that would need MyISAM in future.
--source include/force_myisam_default.inc

#
# Only run this test with a compiled in but disabled
# engine
#
disable_query_log;
let $federated_support = `select engine from information_schema.engines where engine = 'FEDERATED'`;
if(!$federated_support) {
	skip "Test need FEDERATED engine";
}
enable_query_log;

#
# Test for using disabled engine
# The server will throw an error - since FEDERATED is disabled
#
--ERROR ER_UNKNOWN_STORAGE_ENGINE
create table t1 (id int) engine=FEDERATED;
--ERROR ER_UNKNOWN_STORAGE_ENGINE
alter table t1 engine=FEDERATED;
--ERROR ER_BAD_TABLE_ERROR
drop table t1;

#
# Bug#29263 disabled storage engines omitted in SHOW ENGINES
#
SELECT ENGINE, SUPPORT FROM INFORMATION_SCHEMA.ENGINES WHERE ENGINE='FEDERATED';
SELECT PLUGIN_NAME, PLUGIN_STATUS FROM INFORMATION_SCHEMA.PLUGINS WHERE
PLUGIN_NAME='FEDERATED';
